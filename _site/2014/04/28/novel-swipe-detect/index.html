<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
    
      Detecting up-down, left-right swipe on Android with greater accuracy. &middot; Shivam Verma
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/styles.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/atom+xml" title="Shivam Verma" href="/atom.xml">
</head>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-68715317-1', 'auto');
  ga('send', 'pageview');

</script>
  <body>

    <div class="container content">
      <header class="masthead">
        <center>
          <h2 class="masthead-title">
            <a href="http://vshivam.github.io">Shivam Verma</a>
            <br/>
            
              &nbsp;&nbsp;&nbsp;
             <small> <a href="/index.html">Blog</a> </small>
            
              &nbsp;&nbsp;&nbsp;
             <small> <a href="/portfolio">Portfolio</a> </small>
            
              &nbsp;&nbsp;&nbsp;
             <small> <a href="/about">About</a> </small>
            
              &nbsp;&nbsp;&nbsp;
             <small> <a href="/atom.xml">Feed</a> </small>
            
          </h3>
        </center>

      </header>

      <main>
        <article class="post">
  <h1 class="post-title">Detecting up-down, left-right swipe on Android with greater accuracy.</h1>
  <time datetime="2014-04-28T00:00:00+08:00" class="post-date">28 Apr 2014</time>
  <p>This probably is the simplest way to detect the exact swipe direction on Android. We split the screen into four quadrants and then use the MotionEvents to calculate the angle of swipe. The code is pretty self explanatory.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">class</span> <span class="nc">SwipeGestureDetector</span> <span class="kd">extends</span> <span class="n">SimpleOnGestureListener</span> <span class="o">{</span>

    <span class="nd">@Override</span> 
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="n">onFling</span><span class="o">(</span><span class="n">MotionEvent</span> <span class="n">e1</span><span class="o">,</span> <span class="n">MotionEvent</span> <span class="n">e2</span><span class="o">,</span> 
        <span class="kt">float</span> <span class="n">velocityX</span><span class="o">,</span> <span class="kt">float</span> <span class="n">velocityY</span><span class="o">)</span> <span class="o">{</span>

        <span class="k">switch</span> <span class="o">(</span><span class="n">getSlope</span><span class="o">(</span><span class="n">e1</span><span class="o">.</span><span class="na">getX</span><span class="o">(),</span> <span class="n">e1</span><span class="o">.</span><span class="na">getY</span><span class="o">(),</span> <span class="n">e2</span><span class="o">.</span><span class="na">getX</span><span class="o">(),</span> <span class="n">e2</span><span class="o">.</span><span class="na">getY</span><span class="o">()))</span> <span class="o">{</span>
        <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
            <span class="n">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="n">LOGTAG</span><span class="o">,</span> <span class="s">"top"</span><span class="o">);</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
            <span class="n">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="n">LOGTAG</span><span class="o">,</span> <span class="s">"left"</span><span class="o">);</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="k">case</span> <span class="mi">3</span><span class="o">:</span>
            <span class="n">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="n">LOGTAG</span><span class="o">,</span> <span class="s">"down"</span><span class="o">);</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="k">case</span> <span class="mi">4</span><span class="o">:</span>
            <span class="n">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="n">LOGTAG</span><span class="o">,</span> <span class="s">"right"</span><span class="o">);</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="n">getSlope</span><span class="o">(</span><span class="kt">float</span> <span class="n">x1</span><span class="o">,</span> <span class="kt">float</span> <span class="n">y1</span><span class="o">,</span> <span class="kt">float</span> <span class="n">x2</span><span class="o">,</span> <span class="kt">float</span> <span class="n">y2</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Double</span> <span class="n">angle</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">toDegrees</span><span class="o">(</span><span class="n">Math</span><span class="o">.</span><span class="na">atan2</span><span class="o">(</span><span class="n">y1</span> <span class="o">-</span> <span class="n">y2</span><span class="o">,</span> <span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="o">));</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">angle</span> <span class="o">&gt;</span> <span class="mi">45</span> <span class="o">&amp;&amp;</span> <span class="n">angle</span> <span class="o">&lt;=</span> <span class="mi">135</span><span class="o">)</span>
        <span class="c1">// top</span>
        <span class="k">return</span> <span class="mi">1</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">angle</span> <span class="o">&gt;=</span> <span class="mi">135</span> <span class="o">&amp;&amp;</span> <span class="n">angle</span> <span class="o">&lt;</span> <span class="mi">180</span> <span class="o">||</span> <span class="n">angle</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">135</span> <span class="o">&amp;&amp;</span> <span class="n">angle</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">180</span><span class="o">)</span>
        <span class="c1">// left</span>
        <span class="k">return</span> <span class="mi">2</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">angle</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">45</span> <span class="o">&amp;&amp;</span> <span class="n">angle</span><span class="o">&gt;=</span> <span class="o">-</span><span class="mi">135</span><span class="o">)</span>
        <span class="c1">// down</span>
        <span class="k">return</span> <span class="mi">3</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">angle</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">45</span> <span class="o">&amp;&amp;</span> <span class="n">angle</span> <span class="o">&lt;=</span> <span class="mi">45</span><span class="o">)</span>
        <span class="c1">// right</span>
        <span class="k">return</span> <span class="mi">4</span><span class="o">;</span>
        <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
    <span class="o">}</span></code></pre></figure>

<p>To check out how to use this <code>SwipeGestureDetector</code> class with the relevant view, check out <a href="http://vshivam.github.io/2013/09/02/privly-reading-app/">this</a> post.</p>

</article>


<aside class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/2016/04/20/fossasia-2016/">
            FOSSAsia 2016
            <small><time datetime="2016-04-20T00:00:00+08:00">20 Apr 2016</time></small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2016/03/30/unfollow-all-quora/">
            How to unfollow everyone on Quora, you ask ?
            <small><time datetime="2016-03-30T00:00:00+08:00">30 Mar 2016</time></small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2015/06/09/compatible-rsa-encryption/">
            Android, JavaScript and Python compatible RSA Encryption.
            <small><time datetime="2015-06-09T00:00:00+08:00">09 Jun 2015</time></small>
          </a>
        </h3>
      </li>
    
  </ul>
</aside>


        
<!-- Add Disqus comments. -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'vshivam';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

      </main>

      <footer class="footer">
      <center> 
            <small>
              Made By Shivam Verma. <br/>Powered by Jekyll and 
              Github. Theme adapted from Poole.
            </small>
      </center>
          <!--
          &copy; 
          <time datetime="2016-04-20T15:22:38+08:00">2016</time>. All rights reserved.
          -->
        </small>
      </footer>
    </div>



  </body>
</html>
